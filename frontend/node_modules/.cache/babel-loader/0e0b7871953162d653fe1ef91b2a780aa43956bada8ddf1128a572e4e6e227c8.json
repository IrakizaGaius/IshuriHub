{"ast":null,"code":"var _jsxFileName = \"/Users/irakizagaius/Downloads/IshuriHub/frontend/src/components/StudentDetails.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './StudentDetails.css';\nimport { getSubjects, getStudents, getTermDetails } from '../api'; // Assuming these endpoints exist\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentDetailsPage = () => {\n  _s();\n  const [students, setStudents] = useState([]);\n  const [subjects, setSubjects] = useState([]);\n  const [marks, setMarks] = useState({});\n  const [currentTerm, setCurrentTerm] = useState(null);\n  useEffect(() => {\n    const fetchInitialData = async () => {\n      try {\n        // Fetch students\n        const students = await getStudents();\n        setStudents(students);\n\n        // Fetch subjects\n        const subjects = await getSubjects();\n        setSubjects(subjects);\n\n        // Fetch term details (including duration and current term)\n        const termDetails = await getTermDetails();\n        const now = new Date();\n\n        // Determine the current term based on duration\n        const activeTerm = termDetails.find(term => new Date(term.startDate) <= now && now <= new Date(term.endDate));\n        setCurrentTerm(activeTerm || termDetails[0]); // Default to first term if no active term\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchInitialData();\n  }, []);\n  const calculateTermTotal = (studentMarks, termId) => {\n    return subjects.reduce((total, subject) => {\n      var _studentMarks$termId;\n      const subjectMarks = (studentMarks === null || studentMarks === void 0 ? void 0 : (_studentMarks$termId = studentMarks[termId]) === null || _studentMarks$termId === void 0 ? void 0 : _studentMarks$termId[subject.name]) || 0;\n      return total + subjectMarks;\n    }, 0);\n  };\n  const calculateOverallTotal = studentMarks => {\n    return currentTerm !== null && currentTerm !== void 0 && currentTerm.id ? calculateTermTotal(studentMarks, currentTerm.id) : 0;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"students-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: currentTerm ? `Current Term: ${currentTerm.name}` : 'No Active Term'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), currentTerm ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"term-report\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Report for \", currentTerm.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Duration: \", currentTerm.startDate, \" to \", currentTerm.endDate]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), subjects.map(subject => /*#__PURE__*/_jsxDEV(\"th\", {\n              children: subject.name\n            }, subject.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Term Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: students.map(student => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: student.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this), subjects.map(subject => {\n              var _marks$student$id, _marks$student$id$cur;\n              return /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_marks$student$id = marks[student.id]) === null || _marks$student$id === void 0 ? void 0 : (_marks$student$id$cur = _marks$student$id[currentTerm.id]) === null || _marks$student$id$cur === void 0 ? void 0 : _marks$student$id$cur[subject.name]) || 0\n              }, subject.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 21\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: calculateTermTotal(marks[student.id], currentTerm.id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this)]\n          }, student.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: subjects.length + 1,\n              style: {\n                fontWeight: 'bold'\n              },\n              children: \"Overall Total for All Students\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                fontWeight: 'bold'\n              },\n              children: students.reduce((sum, student) => sum + calculateTermTotal(marks[student.id], currentTerm.id), 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No active term is currently ongoing.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentDetailsPage, \"MepP/2x1o8ZqQ6kvN3ui/MmpTgk=\");\n_c = StudentDetailsPage;\nexport default StudentDetailsPage;\nvar _c;\n$RefreshReg$(_c, \"StudentDetailsPage\");","map":{"version":3,"names":["React","useState","useEffect","getSubjects","getStudents","getTermDetails","jsxDEV","_jsxDEV","StudentDetailsPage","_s","students","setStudents","subjects","setSubjects","marks","setMarks","currentTerm","setCurrentTerm","fetchInitialData","termDetails","now","Date","activeTerm","find","term","startDate","endDate","error","console","calculateTermTotal","studentMarks","termId","reduce","total","subject","_studentMarks$termId","subjectMarks","name","calculateOverallTotal","id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","student","_marks$student$id","_marks$student$id$cur","colSpan","length","style","fontWeight","sum","_c","$RefreshReg$"],"sources":["/Users/irakizagaius/Downloads/IshuriHub/frontend/src/components/StudentDetails.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './StudentDetails.css';\nimport { getSubjects, getStudents, getTermDetails } from '../api'; // Assuming these endpoints exist\n\nconst StudentDetailsPage = () => {\n  const [students, setStudents] = useState([]);\n  const [subjects, setSubjects] = useState([]);\n  const [marks, setMarks] = useState({});\n  const [currentTerm, setCurrentTerm] = useState(null);\n\n  useEffect(() => {\n    const fetchInitialData = async () => {\n      try {\n        // Fetch students\n        const students = await getStudents();\n        setStudents(students);\n\n        // Fetch subjects\n        const subjects = await getSubjects();\n        setSubjects(subjects);\n\n        // Fetch term details (including duration and current term)\n        const termDetails = await getTermDetails();\n        const now = new Date();\n\n        // Determine the current term based on duration\n        const activeTerm = termDetails.find(\n          (term) => new Date(term.startDate) <= now && now <= new Date(term.endDate)\n        );\n        setCurrentTerm(activeTerm || termDetails[0]); // Default to first term if no active term\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n\n    fetchInitialData();\n  }, []);\n\n  const calculateTermTotal = (studentMarks, termId) => {\n    return subjects.reduce((total, subject) => {\n      const subjectMarks = studentMarks?.[termId]?.[subject.name] || 0;\n      return total + subjectMarks;\n    }, 0);\n  };\n\n  const calculateOverallTotal = (studentMarks) => {\n    return currentTerm?.id\n      ? calculateTermTotal(studentMarks, currentTerm.id)\n      : 0;\n  };\n\n  return (\n    <div className=\"students-container\">\n      <h1>{currentTerm ? `Current Term: ${currentTerm.name}` : 'No Active Term'}</h1>\n\n      {currentTerm ? (\n        <div className=\"term-report\">\n          <h2>Report for {currentTerm.name}</h2>\n          <p>\n            Duration: {currentTerm.startDate} to {currentTerm.endDate}\n          </p>\n\n          <table>\n            <thead>\n              <tr>\n                <th>Name</th>\n                {subjects.map((subject) => (\n                  <th key={subject.id}>{subject.name}</th>\n                ))}\n                <th>Term Total</th>\n              </tr>\n            </thead>\n            <tbody>\n              {students.map((student) => (\n                <tr key={student.id}>\n                  <td>{student.name}</td>\n                  {subjects.map((subject) => (\n                    <td key={subject.id}>\n                      {marks[student.id]?.[currentTerm.id]?.[subject.name] || 0}\n                    </td>\n                  ))}\n                  <td>{calculateTermTotal(marks[student.id], currentTerm.id)}</td>\n                </tr>\n              ))}\n            </tbody>\n            <tfoot>\n              <tr>\n                <td colSpan={subjects.length + 1} style={{ fontWeight: 'bold' }}>\n                  Overall Total for All Students\n                </td>\n                <td style={{ fontWeight: 'bold' }}>\n                  {students.reduce(\n                    (sum, student) =>\n                      sum + calculateTermTotal(marks[student.id], currentTerm.id),\n                    0\n                  )}\n                </td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n      ) : (\n        <p>No active term is currently ongoing.</p>\n      )}\n    </div>\n  );\n};\n\nexport default StudentDetailsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}